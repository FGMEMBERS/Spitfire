<?xml version="1.0"?>
  <!--
************************************************************************
YASim aerodynamic model for a Spitfire IIa 


The reference datum for measurements is the nose.
************************************************************************
-->
  <!-- Weight of everything but fuel  (4873 empty) -->
  <airplane mass="5200"> 
    <!-- Approach configuration -->
    <approach speed="70" aoa="12.5"> 
      <control-setting axis="/controls/engines/engine[0]/throttle" value="0.1"/>
      <control-setting axis="/controls/engines/engine[0]/mixture" value="1.0"/>
      <control-setting axis="/controls/engines/engine[0]/propeller-pitch" value="1"/>
      <control-setting axis="/controls/engines/engine[0]/boost" value="1"/>
      <control-setting axis="/controls/flight/flaps" value="1.0"/>
      <control-setting axis="/controls/gear/gear-down" value="1"/>
      <solve-weight idx="0" weight="180"/>
    </approach>
    <!-- Cruise configuration -->
    <cruise speed="308" alt="17500"> 
      <control-setting axis="/controls/engines/engine[0]/throttle" value="0.9"/>
      <control-setting axis="/controls/engines/engine[0]/mixture" value="1.00"/>
      <control-setting axis="/controls/engines/engine[0]/propeller-pitch" value="0.80"/>
      <control-setting axis="/controls/engines/engine[0]/boost" value="1"/>
      <control-setting axis="/controls/flight/flaps" value="0.0"/>
      <control-setting axis="/controls/gear/gear-down" value="0"/>
      <solve-weight idx="0" weight="180"/>
    </cruise>
    <!-- pilot's eyepoint -->
    <cockpit x="-3.86" y="0" z="0.55"/>
    <fuselage 
		ax="0.0" ay="0.0" az="0.0"
		bx="-9.13" by="0.0" bz="0.0"
		width="0.95" taper="0.38" midpoint="0.4"
/>
    <!--
NACA airfoil section 2213  
stall aoa not available
flap drag not available
-->
    <wing 
		x="-2.99" y="0.77" z="-0.81"
		taper="0.3" incidence="2" twist="-2.0"
		length="4.580" chord="2.845" sweep="0"
		camber="0.0569" dihedral="6" effectiveness="1.25" > 
      <stall aoa="24" width="4" peak="1.5"/>
      <flap0 start="0.00" end="0.437" lift="1.4" drag="1.6"/>
      <flap1 start="0.437" end="0.90" lift="1.35" drag="1.35"/>
      <control-input axis="/controls/flight/flaps" control="FLAP0"/>
      <control-output control="FLAP0" prop="/surface-positions/flap-pos-norm"/>
      <control-speed control="FLAP0" transition-time="10"/>
      <control-input axis="/controls/flight/aileron" control="FLAP1" split="true"/>
      <control-output control="FLAP1" side="left"
	  prop="/surface-positions/left-aileron-pos-norm"/>
      <control-output control="FLAP1" side="right"
	  prop="/surface-positions/right-aileron-pos-norm"/>
      <control-speed control="FLAP1" transition-time="1"/>
    </wing>
    <!-- tailplane -->
    <hstab 
	x="-8.22" y="0.25" z="0.0" 
	taper="0.639" effectiveness="1.2"
	length="1.215" chord="1.246" sweep="5" > 
      <stall aoa="22" width="4" peak="1.5"/>
      <flap0 start="0.0" end="1" lift="1.7" drag="1.5"/>
      <control-input axis="/controls/flight/elevator" control="FLAP0"/>
      <control-input axis="/controls/flight/elevator-trim" control="FLAP0"/>
      <control-output control="FLAP0" prop="/surface-positions/elevator-pos-norm"/>
    </hstab>
    <!-- tail -->
    <vstab x="-8.52" y="0" z="-0.29" taper="0.386" effectiveness="1.2" incidence="0.25"
	 length="1.65" chord="0.994" sweep="5" > 
      <stall aoa="20" width="4" peak="1.5"/>
      <flap0 start="0" end="1" lift="1.4" drag="1.4"/>
      <control-input axis="/controls/flight/rudder" square="true" control="FLAP0" invert="true"/>
      <control-output control="FLAP0" prop="/surface-positions/rudder-pos-norm"
		  min="1" max="-1"/>
      <flap1 start="0.3" end="0.65" lift="1.4" drag="1.4"/>
      <control-input axis="/controls/flight/rudder-trim" control="FLAP1" invert="true"/>
	  <control-output control="FLAP1" prop="/surface-positions/rudder-trim-pos-norm"
		  min="3" max="-3"/>
    </vstab>
    <!-- stub wing left -->
    <vstab x="-2.99" y="0.32" z="-0.81" taper="0" incidence="-2" twist="0"
       chord="2.845" sweep="0" camber="0.0569" dihedral="90" 
       length="0.503"  > 
      <stall aoa="20" width="4" peak="1.5"/>
      <flap0 start="0.00" end="1" lift="1.4" drag="1.6"/>
      <control-input axis="/controls/flight/flaps" control="FLAP0"/>
      <control-output control="FLAP0" prop="/surface-positions/flap-pos-norm"/>
      <control-speed control="FLAP0" transition-time="10"/>
    </vstab>
    <!-- stub wing right -->
    <vstab x="-2.99" y="-0.32" z="-0.81" taper="0" incidence="2" twist="0"
       chord="2.845" sweep="0" camber="0.0569" dihedral="-90" 
       length="0.503"  > 
      <stall aoa="20" width="4" peak="1.5"/>
      <flap0 start="0.00" end="1" lift="1.4" drag="1.6"/>
      <control-input axis="/controls/flight/flaps" control="FLAP0"/>
      <control-output control="FLAP0" prop="/surface-positions/flap-pos-norm"/>
      <control-speed control="FLAP0" transition-time="10"/>
    </vstab>
    <!-- radiator 'wing' right -->
    <vstab x="-3.23" y="-0.51" z="1.02" taper="0" incidence="0" twist="0"
       chord="1.114" sweep="0" camber="0.0" dihedral="-84" 
       length="0.63"  > 
      <stall aoa="20" width="4" peak="1.5"/>
      <flap0 start="0.00" end="1" lift="1.4" drag="1.6"/>
      <control-input axis="/controls/engines/engine/cowl-flaps-norm" control="FLAP0"/>
      <control-output control="FLAP0" prop="/engines/engine/cowl-flaps-norm"/>
      <control-speed control="FLAP0" transition-time="3" />
    </vstab>
    <!-- propeller and engine -->
    <!-- moment = radius(m)* propeller mass(kg)/2 - equation provided by Andy Ross -->
    <!--  cruise-rpm documented gear ratio of 0.477  min-rpm="1500" max-rpm="3000"
gear-ratio = "0.477" moment = 37.15-->
    <propeller   x="-1.35" y="0" z="-0.0"
            radius="1.638" moment="-17" 
            mass="2000" 
			eng-power="1140" eng-rpm="3000"
			turbo-mul="4" wastegate-mp="48"
			cruise-alt="17500" cruise-power="1120"
			cruise-speed="300" cruise-rpm="2850"
			takeoff-power="1140" takeoff-rpm="3000"
			manual-pitch="true"
						> 
      <actionpt x="-0.75" y="0" z="0"/>
      <control-input axis="/controls/engines/engine[0]/throttle" control="THROTTLE"/>
      <control-input axis="/controls/engines/engine[0]/starter" control="STARTER"/>
      <control-input axis="/controls/engines/engine[0]/magnetos" control="MAGNETOS"/>
      <control-input axis="/controls/engines/engine[0]/mixture" control="MIXTURE"/>
      <control-input axis="/controls/engines/engine[0]/propeller-pitch" control="PROPPITCH"
						src0="0" src1="1" dst0="0.2" dst1="0.82" />
      <control-input axis="/controls/engines/engine[0]/boost" control="BOOST"/>
    </propeller>
    <!-- left main spring="0.7" damp="3.0"-->
    <gear x="-2.20" y="0.87" z="-2.00" compression="0.25" dfric="0.5"> 
      <control-input axis="/controls/gear/brake-left" control="BRAKE"/>
      <control-input axis="/controls/gear/brake-parking" control="BRAKE" split="true"/>
      <control-input axis="/controls/gear/gear-down" control="EXTEND"/>
      <control-speed control="EXTEND" transition-time="9"/>
      <control-output control="EXTEND" prop="/gear/gear/position-norm"/>
    </gear>
    <!-- right main spring="0.7" damp="3.0" -->
    <gear x="-2.20" y="-0.87" z="-2.00" compression="0.25" dfric="0.5"> 
      <control-input axis="/controls/gear/brake-right" control="BRAKE"/>
      <control-input axis="/controls/gear/brake-parking" control="BRAKE" split="true"/>
      <control-input axis="/controls/gear/gear-down" control="EXTEND"/>
      <control-speed control="EXTEND" transition-time="7"/>
      <control-output control="EXTEND" prop="/gear/gear[1]/position-norm"/>
    </gear>
    <!-- Tail wheel -->
    <!-- tail wheel casters freely in Spitfire, but locked here to make it work!  -->
    <gear x="-8.48" y="0" z="-0.66" compression="0.1" dfric="0.05" sfric ="0.10"> 
      <control-input axis="/controls/gear/tailwheel-lock" control="CASTERING"/>
    </gear>
    <!-- Canopy -->
    <gear x="-3.90" y="0.0" z="0.7" compression="1"> 
      <control-input axis="/controls/flight/canopy-slide" control="EXTEND"/>
      <control-speed control="EXTEND" transition-time="2"/>
      <control-output control="EXTEND" prop="/gear/canopy/position-norm"/>
    </gear>
    <!-- Fuselage tanks. 
Weight of contents calculated using 100 octane AVGAS density of 695 kg/m3 @ 15degC
-->
    <tank x="-2.80" y="0" z="0.17" capacity="335"/>
    <!-- upper 48 imp gals -->
    <tank x="-2.56" y="0" z="-0.45" capacity="258"/>
    <!--  lower 37 imp gals -->
    <!-- ballast and weights -->
    <!-- Cockpit, sundries-->
    <ballast x="-5.20" y="0" z="0" mass="400"/>
    <!-- armament -->
    <!-- -->
    <ballast x="-2.9" y="3.85" z="-0.48" mass="170"/>
    <ballast x="-2.9" y="-3.85" z="-0.48" mass="170"/>
    <ballast x="-2.9" y="2.91" z="-0.57" mass="170"/>
    <ballast x="-2.9" y="-2.91" z="-0.57" mass="170"/>
    <ballast x="-2.9" y="2.67" z="-0.60" mass="170"/>
    <ballast x="-2.9" y="-2.67" z="-0.60" mass="170"/>
    <ballast x="-2.9" y="2.07" z="-0.65" mass="170"/>
    <ballast x="-2.9" y="-2.07" z="-0.65" mass="170"/>
    <!-- pilot -->
    <weight x="-3.805" y="0" z="-0.05" mass-prop="/yasim/spitfire/pilot-lb"/>
  </airplane>
